<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="jm-board-mapper">
	<resultMap type="Board" id="boardResultSet">
		<id property="b_num" column="B_NUM"/>
		<result property="b_user_num" column="B_USER_NUM"/>
		<result property="b_content" column="B_CONTENT"/>
		<result property="b_status" column="B_STATUS"/>
		<result property="b_date" column="B_DATE"/>
		<result property="image1" column="IMAGE1"/>
		<result property="image2" column="IMAGE2"/>
		<result property="image3" column="IMAGE3"/>
		<result property="image4" column="IMAGE4"/>
		<result property="image5" column="IMAGE5"/>
		<result property="b_top" column="B_TOP"/>
		<result property="b_bottom" column="B_BOTTOM"/>
		<result property="b_shoes" column="B_SHOES"/>
		<result property="b_acc" column="B_ACC"/>
		<result property="b_etc" column="B_ETC"/>
		<result property="b_user_height" column="HEIGHT"/>
		<result property="b_user_weight" column="WEIGHT"/>
		<result property="b_profile_img" column="RENAME_PROFILE_IMG"/>
		<result property="b_user_id" column="ID"/>
		<result property="b_name" column="UNAME"/>
		
	</resultMap>
	
	
	<select id="followingpost" resultMap="boardResultSet">
		SELECT *
		FROM LML_BOARD b
        JOIN LML_MEM m ON B.B_USER_NUM = M.USER_NUM
		WHERE B_USER_NUM IN(
		    SELECT TO_FOLLOW
		    FROM FOLLOW_LIST
		    WHERE FROM_FOLLOW = #{usernum})
		 ORDER BY B_DATE DESC
	</select>
	
	<select id="myPost" parameterType="_int" resultMap="boardResultSet">
		SELECT * 
		FROM LML_BOARD 
		WHERE B_USER_NUM = #{uNum}
		ORDER BY B_DATE DESC
	
	</select>
	
 	<select id="tagPost" parameterType="String" resultMap="boardResultSet">
 	    SELECT * 
 		FROM LML_MEM m
        JOIN LML_BOARD b ON  m.USER_NUM = B.B_USER_NUM
        JOIN LML_HASH h ON h.H_BNUM = b.B_NUM
        WHERE HASHTAG ='#'||#{keyword}
        ORDER BY B_DATE DESC
        
	</select>
	
	<select id="postCount" parameterType="String" resultType="_int">
	
		SELECT COUNT(*) 
 		FROM LML_MEM m
        JOIN LML_BOARD b ON  m.USER_NUM = B.B_USER_NUM
        JOIN LML_HASH h ON h.H_BNUM = b.B_NUM
        WHERE HASHTAG ='#'||#{keyword}
	
	</select>
	
	
	
	
	
	
	
	
	
	
	
	</mapper>


	
	