<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="qnaMapper">
	<resultMap type="qnaBoard" id="qnaboardResultSet">
		<id property="q_num" column="Q_NUM"/>
		<result property="q_user_num" column="Q_USER_NUM"/>
		<result property="q_content" column="Q_CONTENT"/>
		<result property="q_status" column="Q_STATUS"/>
		<result property="q_date" column="Q_DATE"/>
		<result property="image1" column="IMAGE1"/>
		<result property="image2" column="IMAGE2"/>
		<result property="image3" column="IMAGE3"/>
		<result property="image4" column="IMAGE4"/>
		<result property="image5" column="IMAGE5"/>
		<result property="q_user_height" column="HEIGHT"/>
		<result property="q_user_weight" column="WEIGHT"/>
		<result property="q_profile_img" column="RENAME_PROFILE_IMG"/>
		<result property="q_user_id" column="ID"/>
		<result property="q_name" column="UNAME"/>
		<result property="q_hash" column="HASHTAG"/>
		<result property="h_bnum" column="H_BNUM"/>
		<result property="h_unum" column="H_UNUM"/>
	</resultMap>
	<insert id="insertQnaPost" parameterType="qnaBoard">
		INSERT
		INTO LML_QNABOARD
		VALUES(QNABOARD_SEQ.NEXTVAL, #{q_user_num}, #{q_content}, DEFAULT, SYSDATE, #{image1}, #{image2}, #{image3}, #{image4}, #{image5})
	</insert>
	<select id="getqnum" resultType="_int">
		SELECT QNABOARD_SEQ.CURRVAL AS Q_NUM FROM DUAL
	</select>
	<insert id="insertStyleHash" parameterType="qnaBoard">
		INSERT INTO LML_HASH
		VALUES (#{q_hash}, #{q_num})
	</insert>
	<select id="selectList" resultMap="qnaboardResultSet">
		SELECT *
		FROM LML_QNABOARD
		JOIN LML_MEM ON (Q_USER_NUM = USER_NUM)
		ORDER BY Q_NUM DESC
	</select>
	<select id="selectOne" resultMap="qnaboardResultSet">
		SELECT *
		FROM LML_QNABOARD
		JOIN LML_MEM ON (Q_USER_NUM = USER_NUM)
		WHERE Q_NUM = #{qnum}
	</select>
</mapper>